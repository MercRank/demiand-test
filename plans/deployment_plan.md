# –ü–ª–∞–Ω —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é (DEPLOY.md)

## 1. –í–≤–µ–¥–µ–Ω–∏–µ
–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Streamlit Admin UI, Telegram Bot, Qdrant) –∏ —Ü–µ–ª–∏ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞.

## 2. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
*   **–°–µ—Ä–≤–µ—Ä:** –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Ubuntu 22.04, 2GB+ RAM, 1-2 vCPU).
*   **–ü–û:** Docker, Docker Compose, Git.
*   **–î–æ—Å—Ç—É–ø—ã:** API –∫–ª—é—á–∏ (OpenAI, Telegram Bot Token).

## 3. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞ –ø—Ä–∏–º–µ—Ä–µ Ubuntu)
*   –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã.
*   –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∏ Docker Compose (–∫–æ–º–∞–Ω–¥—ã).

## 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
*   –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.
*   –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (`.env`).
    *   –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–∞–∂–¥–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π (`OPENAI_API_KEY`, `TELEGRAM_BOT_TOKEN`, `QDRANT_URL`, `QDRANT_API_KEY`, `COLLECTION_NAME`).

## 5. –ó–∞–ø—É—Å–∫ (Docker Compose)
*   –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ (`docker-compose up -d --build`).
*   –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (`docker-compose ps`).
*   –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ (`docker-compose logs -f`).

## 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx –∏ SSL (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
*   –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx.
*   –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è Streamlit (–ø–æ—Ä—Ç 8501).
*   –ü–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —á–µ—Ä–µ–∑ Certbot (Let's Encrypt).
*   *–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –≠—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω–∫–µ –ø–æ –¥–æ–º–µ–Ω—É, –∞ –Ω–µ –ø–æ IP.*

## 7. –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
*   –ö–∞–∫ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.
*   –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (volume `qdrant_data`).
*   –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –æ–±—Ä–∞–∑–æ–≤.

## 8. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫ (Troubleshooting)
*   –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (–∫–æ–Ω—Ñ–ª–∏–∫—Ç –ø–æ—Ä—Ç–æ–≤, –æ—à–∏–±–∫–∏ –≤ `.env`).
*   –ö–∞–∫ —Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞.

---

# –ß–µ—Ä–Ω–æ–≤–∏–∫ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ (DEPLOY.md)

```markdown
# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é (Deployment Guide)

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å RAG-–±–æ—Ç–∞ –∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ (VPS) –ø–æ–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º Linux (Ubuntu).

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å:

1.  **VPS/VDS —Å–µ—Ä–≤–µ—Ä**:
    *   –û–°: Ubuntu 20.04 –∏–ª–∏ 22.04 (LTS).
    *   –†–µ—Å—É—Ä—Å—ã: –ú–∏–Ω–∏–º—É–º 2 –ì–ë RAM (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 4 –ì–ë –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã Qdrant –∏ ML-–±–∏–±–ª–∏–æ—Ç–µ–∫), 1-2 vCPU, 20 –ì–ë –¥–∏—Å–∫–∞.
2.  **–î–æ–º–µ–Ω–Ω–æ–µ –∏–º—è** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏).
3.  **API –ö–ª—é—á–∏**:
    *   `OPENAI_API_KEY`: –û—Ç OpenAI Platform.
    *   `TELEGRAM_BOT_TOKEN`: –û—Ç @BotFather –≤ Telegram.

## üõ† –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH –∏ –æ–±–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç—ã:

```bash
sudo apt update && sudo apt upgrade -y
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∏ Docker Compose

–ï—Å–ª–∏ Docker –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker (—á—Ç–æ–±—ã –Ω–µ –ø–∏—Å–∞—Ç—å sudo –∫–∞–∂–¥—ã–π —Ä–∞–∑)
sudo usermod -aG docker $USER
newgrp docker

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
docker --version
docker compose version
```

## üì• –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1.  **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π** (–∑–∞–º–µ–Ω–∏—Ç–µ URL –Ω–∞ –≤–∞—à):

    ```bash
    git clone https://github.com/your-username/your-repo.git app
    cd app
    ```

2.  **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**:

    –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –∏–∑ –ø—Ä–∏–º–µ—Ä–∞:

    ```bash
    cp .env.example .env
    nano .env
    ```

    –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–∞–π–ª –≤–∞—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

    ```ini
    OPENAI_API_KEY=sk-proj-...
    TELEGRAM_BOT_TOKEN=123456:ABC-DEF...
    
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Qdrant (–æ—Å—Ç–∞–≤—å—Ç–µ –∫–∞–∫ –µ—Å—Ç—å –¥–ª—è Docker Compose)
    QDRANT_URL=http://qdrant:6333
    QDRANT_API_KEY=
    COLLECTION_NAME=knowledge_base
    ```

    *–ù–∞–∂–º–∏—Ç–µ `Ctrl+X`, –∑–∞—Ç–µ–º `Y` –∏ `Enter` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è.*

## üöÄ –®–∞–≥ 3: –ó–∞–ø—É—Å–∫

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:

```bash
docker compose up -d --build
```

*   `-d`: –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ (detached).
*   `--build`: –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤ (–ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏).

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã:

```bash
docker compose ps
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Ç—Ä–∏ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–∞: `qdrant`, `admin_ui`, `bot`.

## üåê –®–∞–≥ 4: –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

*   **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å**: –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ `http://<IP-–í–ê–®–ï–ì–û-–°–ï–†–í–ï–†–ê>:8501`.
    *   *–í–∞–∂–Ω–æ: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 8501 –æ—Ç–∫—Ä—ã—Ç –≤ —Ñ–∞–µ—Ä–≤–æ–ª–µ –≤–∞—à–µ–≥–æ —Ö–æ—Å—Ç–∏–Ω–≥-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.*
*   **Telegram –ë–æ—Ç**: –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram –∏ –Ω–∞–∂–º–∏—Ç–µ `/start`.

## üîí –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx –∏ HTTPS (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ß—Ç–æ–±—ã –∑–∞—â–∏—Ç–∏—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –∏ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –µ—ë –ø–æ –∫—Ä–∞—Å–∏–≤–æ–º—É –¥–æ–º–µ–Ω—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `admin.example.com`), –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx.

1.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Nginx –∏ Certbot**:
    ```bash
    sudo apt install nginx certbot python3-certbot-nginx -y
    ```

2.  **–°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥ —Å–∞–π—Ç–∞**:
    ```bash
    sudo nano /etc/nginx/sites-available/rag-admin
    ```

    –í—Å—Ç–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ (–∑–∞–º–µ–Ω–∏—Ç–µ `admin.example.com` –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω):
    ```nginx
    server {
        server_name admin.example.com;

        location / {
            proxy_pass http://localhost:8501;
            proxy_http_version 1.1;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header Host $host;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_read_timeout 86400;
        }
    }
    ```

3.  **–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —Å–∞–π—Ç –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ Nginx**:
    ```bash
    sudo ln -s /etc/nginx/sites-available/rag-admin /etc/nginx/sites-enabled/
    sudo nginx -t
    sudo systemctl reload nginx
    ```

4.  **–ü–æ–ª—É—á–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç**:
    ```bash
    sudo certbot --nginx -d admin.example.com
    ```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
–ß—Ç–æ–±—ã –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏:

```bash
git pull
docker compose up -d --build
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

```bash
# –õ–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker compose logs -f

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–æ—Ç–∞)
docker compose logs -f bot
```

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
–í—Å–µ –¥–∞–Ω–Ω—ã–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Docker volume `qdrant_data`. –î–∞–Ω–Ω—ã–µ –Ω–µ –ø—Ä–æ–ø–∞–¥—É—Ç –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.
```
